<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.jenitennison.com/xslt/xspec"
        xspec="../../port-specific-results.xspec"
        xproc="../../../../xproc/cases/library.xpl"
        date="2000-01-01T00:00:00Z">
   <scenario id="scenario1" xspec="../../port-specific-results.xspec">
      <label>When x:expect[@port] fails</label>
      <input-wrap xmlns="">
         <x:call xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:x="http://www.jenitennison.com/xslt/xspec"
                 step="s:output-port-sequence-true">
            <x:option name="num" select="1"/>
         </x:call>
      </input-wrap>
      <scenario id="scenario1-scenario1" xspec="../../port-specific-results.xspec">
         <label>due to @result-type</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
}}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario1-scenario1-expect1" successful="false">
            <label>the report shows the output at that port vs. the sequence type
                    condition</label>
            <expect-test-wrap xmlns="">
               <x:expect xmlns:s="x-urn:test:xproc:steplibrary"
                         xmlns:x="http://www.jenitennison.com/xslt/xspec"
                         result-type="$x:result instance of empty-sequence()"/>
            </expect-test-wrap>
            <port-specific>
               <result select="/self::document-node()">
                  <content-wrap xmlns="">
                     <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                      xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                  </content-wrap>
               </result>
            </port-specific>
            <expect select="()"/>
         </test>
      </scenario>
      <scenario id="scenario1-scenario2" xspec="../../port-specific-results.xspec">
         <label>due to boolean @test</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
}}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario1-scenario2-expect1" successful="false">
            <label>the report shows the output at that port vs. the @test value</label>
            <expect-test-wrap xmlns="">
               <x:expect xmlns:s="x-urn:test:xproc:steplibrary"
                         xmlns:x="http://www.jenitennison.com/xslt/xspec"
                         test="empty($x:result)"/>
            </expect-test-wrap>
            <port-specific>
               <result select="/self::document-node()">
                  <content-wrap xmlns="">
                     <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                      xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                  </content-wrap>
               </result>
            </port-specific>
            <expect select="()"/>
         </test>
      </scenario>
      <scenario id="scenario1-scenario3" xspec="../../port-specific-results.xspec">
         <label>without @test and with non-matching document node as expected result</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
}}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario1-scenario3-expect1" successful="false">
            <label>the report shows the output at that port vs. the expected result and both
                    sides say "XPath /self::document-node() from:"</label>
            <port-specific>
               <result select="/self::document-node()">
                  <content-wrap xmlns="">
                     <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                      xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                  </content-wrap>
               </result>
            </port-specific>
            <expect select="/self::document-node()">
               <content-wrap xmlns="">
                  <wrong-output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                         xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
               </content-wrap>
            </expect>
         </test>
         <test id="scenario1-scenario3-expect2" successful="false">
            <label>Same thing without @select</label>
            <port-specific>
               <result select="/self::document-node()">
                  <content-wrap xmlns="">
                     <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                      xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                  </content-wrap>
               </result>
            </port-specific>
            <expect select="/self::document-node()">
               <content-wrap xmlns="">
                  <wrong-output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                         xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
               </content-wrap>
            </expect>
         </test>
      </scenario>
      <scenario id="scenario1-scenario4" xspec="../../port-specific-results.xspec">
         <label>without @test and with element as expected result</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
}}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario1-scenario4-expect1" successful="false">
            <label>the report shows the output at that port vs. the expected result and both
                    sides say "XPath /self::document-node() from:"</label>
            <port-specific>
               <result select="/self::document-node()">
                  <content-wrap xmlns="">
                     <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                      xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                  </content-wrap>
               </result>
            </port-specific>
            <expect select="/self::document-node()">
               <content-wrap xmlns="">
                  <wrong-output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                         xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
               </content-wrap>
            </expect>
         </test>
      </scenario>
      <scenario id="scenario1-scenario5" xspec="../../port-specific-results.xspec">
         <label>with @test that produces a document node</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
}}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario1-scenario5-expect1" successful="false">
            <label>the report shows the filtered output at that port vs. the expected result
                    and label above box says "XPath /self::document-node() from:"</label>
            <expect-test-wrap xmlns="">
               <x:expect xmlns:s="x-urn:test:xproc:steplibrary"
                         xmlns:x="http://www.jenitennison.com/xslt/xspec"
                         test="$x:result"/>
            </expect-test-wrap>
            <result select="/self::document-node()">
               <content-wrap xmlns="">
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
               </content-wrap>
            </result>
            <expect select="/self::document-node()">
               <content-wrap xmlns="">
                  <wrong-output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                         xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
               </content-wrap>
            </expect>
         </test>
      </scenario>
      <scenario id="scenario1-scenario6" xspec="../../port-specific-results.xspec">
         <label>with @test that produces the full map of document properties</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
}}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario1-scenario6-expect1" successful="false">
            <label>the report shows the map for that port vs. the expected result</label>
            <expect-test-wrap xmlns="">
               <x:expect xmlns:s="x-urn:test:xproc:steplibrary"
                         xmlns:x="http://www.jenitennison.com/xslt/xspec"
                         test="$x:document-properties"/>
            </expect-test-wrap>
            <result select="/*">
               <content-wrap xmlns="">
                  <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"}</pseudo-map>
               </content-wrap>
            </result>
            <expect select="/*">
               <content-wrap xmlns="">
                  <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{}</pseudo-map>
               </content-wrap>
            </expect>
         </test>
      </scenario>
      <scenario id="scenario1-scenario7" xspec="../../port-specific-results.xspec">
         <label>with @test that produces a subset of document properties</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
}}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario1-scenario7-expect1" successful="false">
            <label>the report shows the map for that port vs. the expected result</label>
            <expect-test-wrap xmlns="">
               <x:expect xmlns:s="x-urn:test:xproc:steplibrary"
                         xmlns:x="http://www.jenitennison.com/xslt/xspec"
                         test="$x:document-properties?(QName('', 'content-type'))"/>
            </expect-test-wrap>
            <result select="'application/xml'"/>
            <expect select="/*">
               <content-wrap xmlns="">
                  <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{}</pseudo-map>
               </content-wrap>
            </expect>
         </test>
      </scenario>
      <scenario id="scenario1-scenario8" xspec="../../port-specific-results.xspec">
         <label>with boolean @test related to document properties, not documents,</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
}}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario1-scenario8-expect1" successful="false">
            <label>the report shows the documents at that port vs. the @test value (i.e., no
                    special behavior when @test contains $x:document-properties)</label>
            <expect-test-wrap xmlns="">
               <x:expect xmlns:s="x-urn:test:xproc:steplibrary"
                         xmlns:x="http://www.jenitennison.com/xslt/xspec"
                         test="$x:document-properties?(QName('', 'content-type')) eq 'text/plain'"/>
            </expect-test-wrap>
            <port-specific>
               <result select="/self::document-node()">
                  <content-wrap xmlns="">
                     <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                      xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                  </content-wrap>
               </result>
            </port-specific>
            <expect select="()"/>
         </test>
      </scenario>
      <scenario id="scenario1-scenario9" xspec="../../port-specific-results.xspec">
         <label>with @test that produces an element</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
}}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario1-scenario9-expect1" successful="false">
            <label>the report shows the filtered output at that port vs. the expected result
                    and label above box says "XPath /element() from:"</label>
            <expect-test-wrap xmlns="">
               <x:expect xmlns:s="x-urn:test:xproc:steplibrary"
                         xmlns:x="http://www.jenitennison.com/xslt/xspec"
                         test="child::*"/>
            </expect-test-wrap>
            <result select="/element()">
               <content-wrap xmlns="">
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
               </content-wrap>
            </result>
            <expect select="/element()">
               <content-wrap xmlns="">
                  <wrong-output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                         xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
               </content-wrap>
            </expect>
         </test>
         <test id="scenario1-scenario9-expect2" successful="false">
            <label>Same thing without @select</label>
            <expect-test-wrap xmlns="">
               <x:expect xmlns:s="x-urn:test:xproc:steplibrary"
                         xmlns:x="http://www.jenitennison.com/xslt/xspec"
                         test="child::*"/>
            </expect-test-wrap>
            <result select="/element()">
               <content-wrap xmlns="">
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
               </content-wrap>
            </result>
            <expect select="/element()">
               <content-wrap xmlns="">
                  <wrong-output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                         xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
               </content-wrap>
            </expect>
         </test>
      </scenario>
      <scenario id="scenario1-scenario10" xspec="../../port-specific-results.xspec">
         <label>with @test that produces an atomic value</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
}}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario1-scenario10-expect1" successful="false">
            <label>the report shows the atomic value vs. the expected result</label>
            <expect-test-wrap xmlns="">
               <x:expect xmlns:s="x-urn:test:xproc:steplibrary"
                         xmlns:x="http://www.jenitennison.com/xslt/xspec"
                         test="name(child::*[1])"/>
            </expect-test-wrap>
            <result select="'output-document'"/>
            <expect select="'wrong-output-document'"/>
         </test>
      </scenario>
   </scenario>
   <scenario id="scenario2" xspec="../../port-specific-results.xspec">
      <label>When the output port has multiple documents and x:expect[@port] fails</label>
      <input-wrap xmlns="">
         <x:call xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:x="http://www.jenitennison.com/xslt/xspec"
                 step="s:output-port-sequence-true">
            <x:option name="num" select="2"/>
         </x:call>
      </input-wrap>
      <result select="/*">
         <content-wrap xmlns="">
            <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":(map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
},map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
})}}</pseudo-map>
         </content-wrap>
      </result>
      <test id="scenario2-expect1" successful="true">
         <label>(Confirm that output at that port is a pair of document nodes)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:s="x-urn:test:xproc:steplibrary"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="$x:result instance of document-node()+ and count($x:result) eq 2"/>
         </expect-test-wrap>
         <port-specific>
            <result select="/node()">
               <content-wrap xmlns="">
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
               </content-wrap>
            </result>
         </port-specific>
         <expect select="()"/>
      </test>
      <scenario id="scenario2-scenario1" xspec="../../port-specific-results.xspec">
         <label>without @test and with single document node as expected result</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":(map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
},map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
})}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario2-scenario1-expect1" successful="false">
            <label>the report shows the output at that port labeled as "XPath /node() from"
                    (without depicting boundaries between adjacent document nodes) vs. the expected
                    result labeled as "XPath /self::document-node() from"</label>
            <port-specific>
               <result select="/node()">
                  <content-wrap xmlns="">
                     <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                      xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                     <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                      xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                  </content-wrap>
               </result>
            </port-specific>
            <expect select="/self::document-node()">
               <content-wrap xmlns="">
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
               </content-wrap>
            </expect>
         </test>
      </scenario>
      <scenario id="scenario2-scenario2" xspec="../../port-specific-results.xspec">
         <label>without @test and with element sequence as expected result</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":(map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
},map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
})}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario2-scenario2-expect1" successful="false">
            <label>the report shows the output at that port labeled as "XPath /node() from"
                    (without depicting boundaries between adjacent document nodes) vs. the expected
                    result labeled as "XPath /node() from"</label>
            <port-specific>
               <result select="/node()">
                  <content-wrap xmlns="">
                     <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                      xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                     <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                      xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                  </content-wrap>
               </result>
            </port-specific>
            <expect select="/node()">
               <content-wrap xmlns="">
                  <wrong-output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                         xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
               </content-wrap>
            </expect>
         </test>
      </scenario>
      <scenario id="scenario2-scenario3" xspec="../../port-specific-results.xspec">
         <label>with @test that produces multiple document nodes and sequence of multiple
                document nodes as expected result</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":(map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
},map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
})}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario2-scenario3-expect1" successful="false">
            <label>the report shows the output at that port vs. the expected result, both
                    labeled with "XPath /node() from" to indicate multiple nodes (without depicting
                    boundaries between adjacent document nodes)</label>
            <expect-test-wrap xmlns="">
               <x:expect xmlns:s="x-urn:test:xproc:steplibrary"
                         xmlns:x="http://www.jenitennison.com/xslt/xspec"
                         test="$x:result"/>
            </expect-test-wrap>
            <result select="/node()">
               <content-wrap xmlns="">
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
               </content-wrap>
            </result>
            <expect select="/node()">
               <content-wrap xmlns="">
                  <wrong-output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                         xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
               </content-wrap>
            </expect>
         </test>
      </scenario>
      <scenario id="scenario2-scenario4" xspec="../../port-specific-results.xspec">
         <label>with @test that produces element nodes</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":(map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
},map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
})}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario2-scenario4-expect1" successful="false">
            <label>the report shows the filtered output at that port vs. the expected result
                    and both sides say "XPath /element() from:"</label>
            <expect-test-wrap xmlns="">
               <x:expect xmlns:s="x-urn:test:xproc:steplibrary"
                         xmlns:x="http://www.jenitennison.com/xslt/xspec"
                         test="$x:result/child::*"/>
            </expect-test-wrap>
            <result select="/element()">
               <content-wrap xmlns="">
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
               </content-wrap>
            </result>
            <expect select="/element()">
               <content-wrap xmlns="">
                  <wrong-output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                         xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
               </content-wrap>
            </expect>
         </test>
         <test id="scenario2-scenario4-expect2" successful="false">
            <label>Same thing without @select</label>
            <expect-test-wrap xmlns="">
               <x:expect xmlns:s="x-urn:test:xproc:steplibrary"
                         xmlns:x="http://www.jenitennison.com/xslt/xspec"
                         test="$x:result/child::*"/>
            </expect-test-wrap>
            <result select="/element()">
               <content-wrap xmlns="">
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
               </content-wrap>
            </result>
            <expect select="/element()">
               <content-wrap xmlns="">
                  <wrong-output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                         xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
                  <output-document xmlns:s="x-urn:test:xproc:steplibrary"
                                   xmlns:x="http://www.jenitennison.com/xslt/xspec"/>
               </content-wrap>
            </expect>
         </test>
      </scenario>
      <scenario id="scenario2-scenario5" xspec="../../port-specific-results.xspec">
         <label>with @test that produces an atomic value</label>
         <result select="/*">
            <content-wrap xmlns="">
               <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"ports":map{"xproc-result":(map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
},map{"document-properties":map{Q{}base-uri:"library.xpl?uniqueid=1",Q{}content-type:"application/xml"},"document":&lt;output-document xmlns:s="x-urn:test:xproc:steplibrary"
                 xmlns:xs="http://www.w3.org/2001/XMLSchema"/&gt;
})}}</pseudo-map>
            </content-wrap>
         </result>
         <test id="scenario2-scenario5-expect1" successful="false">
            <label>the report shows the atomic value vs. the expected result</label>
            <expect-test-wrap xmlns="">
               <x:expect xmlns:s="x-urn:test:xproc:steplibrary"
                         xmlns:x="http://www.jenitennison.com/xslt/xspec"
                         test="name($x:result[1]/child::*[1])"/>
            </expect-test-wrap>
            <result select="'output-document'"/>
            <expect select="'wrong-output-document'"/>
         </test>
      </scenario>
   </scenario>
</report>
