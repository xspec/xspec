<?xml version="1.0" encoding="UTF-8"?>
<x:description xmlns:s="x-urn:test:xproc:steplibrary"
    xmlns:x="http://www.jenitennison.com/xslt/xspec" xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xproc="library-static-options.xpl">
    <x:scenario label="When global library option is false">
        <x:scenario label="and local step option is true">
            <x:call step="s:add-attrs-maybe">
                <!--<x:option name="s:add-attr" select="false()"/>-->
                <x:option name="local-add-attr" select="true()"/>
            </x:call>
            <x:expect label="Output document has local attribute only" port="result"
                pending="Should this work? See comment at URL shown below.">
                <document local="1"/>
            </x:expect>
        </x:scenario>
        <x:scenario label="and local step option is false">
            <x:call step="s:add-attrs-maybe">
                <!--<x:option name="s:add-attr" select="false()"/>-->
                <x:option name="local-add-attr" select="false()"/>
            </x:call>
            <x:expect label="Output document has no attributes" port="result">
                <document/>
            </x:expect>
        </x:scenario>
    </x:scenario>
    <x:pending>
        <x:label>Should this work? See comment in
            https://codeberg.org/xmlcalabash/xmlcalabash3/issues/380#issuecomment-8629107</x:label>
        <x:scenario label="When global library option is true">
            <x:scenario label="and local step option is true">
                <x:call step="s:add-attrs-maybe">
                    <x:option name="s:add-attr" select="true()"/>
                    <x:option name="local-add-attr" select="true()"/>
                </x:call>
                <x:expect label="Output document has global and local attributes" port="result">
                    <document global="1" local="1"/>
                </x:expect>
            </x:scenario>
            <x:scenario label="and local step option is false">
                <x:call step="s:add-attrs-maybe">
                    <x:option name="s:add-attr" select="true()"/>
                    <x:option name="local-add-attr" select="true()"/>
                </x:call>
                <x:expect label="Output document has global attribute only" port="result">
                    <document global="1"/>
                </x:expect>
            </x:scenario>
        </x:scenario>
    </x:pending>
</x:description>
